### LUKS ENCRYPTION STATUS ###
# View encryption status
sudo cryptsetup status timeshift_crypt

# View detailed LUKS header info
sudo cryptsetup luksDump /dev/nvme1n1p1

### MANUAL MOUNTING/UNMOUNTING ###
# Close encrypted drive
sudo umount /mnt/timeshift
sudo cryptsetup close timeshift_crypt

# Open with key file (automatic)
sudo cryptsetup open --key-file /root/.keys/timeshift.key /dev/nvme1n1p1 timeshift_crypt
sudo mount /dev/mapper/timeshift_crypt /mnt/timeshift

# Open with passphrase (backup method)
sudo cryptsetup open /dev/nvme1n1p1 timeshift_crypt
sudo mount /dev/mapper/timeshift_crypt /mnt/timeshift

### IMPORTANT FILES ###
# Key file location
/root/.keys/timeshift.key

# Configuration files
/etc/crypttab        # Encryption settings
/etc/fstab           # Mount settings
/etc/timeshift/timeshift.json  # Timeshift config

### TROUBLESHOOTING ###
# If mount fails after boot
sudo systemctl daemon-reload
sudo mount -a

# Check if device is properly mapped
sudo dmsetup status

# Device paths
Main partition: /dev/nvme1n1p1
Encrypted mapping: /dev/mapper/timeshift_crypt
Mount point: /mnt/timeshift
